<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="booking_ges_report">
            <t t-call="web.html_container">

                <t t-foreach="docs" t-as="o">
                    <t t-call="web.internal_layout">
                        <div class="page">
                            <div class="row ">
                                <table
                                        style="width:100%;">
                                    <tr>
                                        <td rowspan="7" style="border-top:none;border-bottom:none;border-left:none;border-right:none">
                                            <t t-if="o.company_id">
                                                <img t-att-src="image_data_uri(o.company_id.logo)"
                                                     style="max-height:300px;max-width:220px" alt="Logo"/>
                                            </t>
                                        </td>
                                        <td colspan="4"
                                            style="text-align:center;border:1px solid black;background-color:#7d9fc8">
                                            Quote Package Info
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Customer:
                                        </td>
                                        <td style="text-align:left;border:1px solid black">
                                            <span t-field="o.partner_id.name"/>
                                        </td>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            QP#:
                                        </td>
                                        <td style="text-align:left;border:1px solid black">
                                            <span t-field="o.name"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Contacts:
                                        </td>
                                        <td style="text-align:left;border:1px solid black">
                                            <t t-if="o.contact_id">
                                                <span t-field="o.contact_id.name"/>
                                            </t>
                                        </td>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Salesperson:
                                        </td>
                                        <td style="text-align:left;border:1px solid black"><t t-if="o.user_id">
                                                <span t-field="o.user_id.name"/>
                                            </t></td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Commodity:
                                        </td>
                                        <td style="text-align:left;border:1px solid black">
<!--                                            <t t-if = "o.freight_request_id.booking_id">-->
                                                <span t-field="o.freight_request_id and o.freight_request_id.commodity_description"/>
<!--                                            </t>-->
                                        </td>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Cust. Rep:
                                        </td>
                                        <td style="text-align:left;border:1px solid black"><t t-if="o.customer_representative_id">
                                                <span t-field="o.customer_representative_id.name"/>
                                            </t></td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Effective:
                                        </td>
                                        <td style="text-align:left;border:1px solid black"><span t-field="o.date_order"/></td>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Expires:
                                        </td>
                                        <td style="text-align:left;border:1px solid black"><span t-field="o.validity_date"/></td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black;background-color:#7d9fc8">
                                            Currency:
                                        </td>
                                        <td style="text-align:left;border:1px solid black"><t t-if="o.currency_id">
                                                <span t-field="o.currency_id.name"/>
                                            </t></td>

                                    </tr>
                                    <tr>
                                        <td style="border-left:none"></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                    </tr>
                                </table>

                            </div>
                            <br></br>
                            <div style="width:65%;border:1px solid black;margin-top:20px" class="row">
                                <p style="font-weight: bold">
                                    <span t-esc="o.company_id.name"/><![CDATA[
&nbsp;
]]>-<![CDATA[
&nbsp;
]]>
                                    <span t-esc="o.company_id.city"/>
                                    <br/>
                                    <span t-esc="o.company_id.street"/><![CDATA[
&nbsp;
]]><span t-esc="o.company_id.street2"/><![CDATA[
&nbsp;
]]>,<![CDATA[
&nbsp;
]]><span t-esc="o.company_id.city"/><![CDATA[
&nbsp;
]]>,<![CDATA[
&nbsp;
]]><span t-esc="o.company_id.state_id.name"/><![CDATA[
&nbsp;
]]>-<![CDATA[
&nbsp;
]]>
                                    <span t-esc="o.company_id.zip"/>
                                    <br/>
                                    Phone:<![CDATA[
&nbsp;
]]><span t-esc="o.company_id.phone"/><![CDATA[
&nbsp;
]]><![CDATA[
&nbsp;
]]><![CDATA[
&nbsp;
]]> Email:<![CDATA[
&nbsp;
]]>
                                    <span t-esc="o.company_id.email"/>
                                </p>
                            </div>
                            <br></br>
                            <div class="row" style="margin-top:20px">
                                <table
                                        style="width:100%;border:1px solid black">
                                    <tr style="background-color:#7d9fc8">
                                        <td colspan="5" style="text-align:center;border:1px solid black">
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='air'">
                                                <span>Air</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='ocean'">
                                                <span>Sea</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='land'">
                                                <span>Road</span>
                                            </t>

                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='sea_then_air'">
                                                <span>Sea then Air</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='air_then_sea'">
                                                <span>Air then Sea</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='rail'">
                                                <span>Rail</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='courier'">
                                                <span>Courier</span>
                                            </t>
                                            <t t-if="o.freight_request_id and o.freight_request_id.mode_of_transport=='documentation'">
                                                <span>Documentation</span>
                                            </t>

                                        </td>
                                    </tr>
                                    <tr style="background-color:#838383">
                                        <td style="text-align:center;border:1px solid black">Base Origin</td>
                                        <td style="text-align:center;border:1px solid black">Base Destination</td>
                                        <td style="text-align:center;border:1px solid black">Unit/Cont. Type</td>
                                        <td style="text-align:center;border:1px solid black">Service Frequency</td>
                                        <td style="text-align:center;border:1px solid black">Total Rate</td>

                                    </tr>
                                    <tr>
                                        <td style="text-align:center;border:1px solid black">
                                            <span t-field="o.freight_request_id and o.freight_request_id.origin_airport_id.name"/>
                                        </td>
                                        <td style="text-align:center;border:1px solid black">
                                            <span t-field="o.freight_request_id and o.freight_request_id.destination_airport_id.name"/>
                                        </td>
                                        <td style="text-align:center;border:1px solid black">
                                            <span t-field="o.freight_request_id and o.freight_request_id.package_type_id"/>
                                        </td>
                                        <td style="text-align:center;border:1px solid black">Service Frequency</td>
                                        <td style="text-align:center;border:1px solid black"><span t-esc="o.amount_total"/></td>
                                    </tr>

                                </table>
                            </div>
                            <div class="row" style="margin-top:20px">
                                <table
                                        style="width:86%;border:1px solid black">
                                    <tr style="background-color:#7d9fc8">
                                        <td colspan="5" style="text-align:center;border:1px solid black">
                                            F/B Fees
                                        </td>
                                    </tr>
                                    <tr style="background-color:#838383">
                                        <td style="text-align:center;border:1px solid black">Type</td>
                                        <td style="text-align:center;border:1px solid black">Descriptionn</td>
                                        <td style="text-align:center;border:1px solid black">Tax</td>
                                        <td style="text-align:center;border:1px solid black">Fee</td>
                                        <td style="text-align:center;border:1px solid black">Fee Type</td>
                                    </tr>
                                    <t t-foreach="o.order_line" t-as="line">
                                    <tr>
                                        <td style="text-align:center;border:1px solid black"><span t-esc="line.product_id.name"/></td>
                                        <td style="text-align:center;border:1px solid black"><span t-esc="line.name"/></td>
                                        <td name="td_taxes" style="text-align:center;border:1px solid black" class="text-right">
                                            <span t-esc="', '.join(map(lambda x: (x.description or x.name), line.tax_id))"/>
                                        </td>
                                        <td style="text-align:center;border:1px solid black"><span t-esc="line.price_subtotal"/></td>
                                        <td style="text-align:center;border:1px solid black">Per Document</td>

                                    </tr>
                                    </t>



                                </table>
                            </div>
                            <div class="row" style="margin-top:20px">
                                <table
                                        style="width:86%;border:1px solid black">
                                    <tr style="background-color:#7d9fc8">
                                        <td style="text-align:center;border:1px solid black">Quote Package Notes</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black"><span t-esc="o.freight_note"/>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                            <div class="row" style="margin-top:20px">
                                <table
                                        style="width:86%;border:1px solid black">
                                    <tr style="background-color:#7d9fc8">
                                        <td style="text-align:center;border:1px solid black">Disclaimer</td>
                                    </tr>
                                    <tr>
                                        <td style="text-align:left;border:1px solid black">This message is intended only
                                            for the use of the individual or entity to which it is addressed, and may
                                            contain information that is privileged, confidential and exempt from
                                            disclosure under applicable law. If you have received this message by error,
                                            please delete it from your records.
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                    </t>
                </t>
            </t>
        </template>

        <record id="booking_report_ges" model="ir.actions.report">
            <field name="name">Booking GES</field>
            <field name="model">sale.order</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">freight_management.booking_ges_report</field>
            <field name="report_file">freight_management.booking_ges_report</field>
            <field name="binding_model_id" ref="model_sale_order"/>
            <field name="binding_type">report</field>
        </record>
    </data>

</odoo>
